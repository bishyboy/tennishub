<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wishlist</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <!--Navigation bar--> 
    <nav>
        <div class="sandwich-icon-area">
            <p onclick="openNav()"> &#9776;</p>
        </div>
        <div class="logo">
            <a href="index.html"> <img src="images/tennislogo.png"> </a>
        </div>
        <h2>Tennis Hub</h2>
        <div class="horizontal-nav">
            <ul>
                <li><a class="active" href="index.html">Home</a></li>
                <li><a href="aboutus.html">About Us</a></li>
                <li><a href="contactus.html">Contact Us</a></li>
                <li><a href="racketguide.html">Racket Guide</a></li>
                <li><a href="clearanceitems.html">Clearance Items</a></li>
            </ul>
        </div>
        <div class="container">
            <div class="wishlist">
                <a href="wishlist.html"><img src="images/wishlist.png" alt="wishlist icon"></a>
            </div>
        </div>
        <div class="container">
            <div class="cart">
                <p style="font-size: 25px; font-weight: bold;" onclick='window.open("cart.html", "_self")'><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 4h1.5L9 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm-8.5-3h9.25L19 7H7.312"/>
                </svg></p>
                <span id="cart-count">0</span>
            </div>
        </div>
    </nav>

    <!--Header area--> 
    <header>
        <h1>Your Wishlist</h1>
    </header>

    <!--The curtain dropdown menu-->
<div id="myNav" class="overlay">
    <div class="container">
    <p class="close-icon" onclick="closeNav()"> &times; CLOSE</p>
    <div class="overlay-content">
        <button class="dropdown-btn">Tennis Rackets
            <i class="fa fa-caret-down fa-xs"></i>
        </button>
        <div class="dropdown-container">
            <a href="wilsonrackets.html">Wilson Rackets</a>
            <a href="headrackets.html">Head Rackets</a>
            <a href="babolatrackets.html">Babolat Rackets</a>
            <a href="yonexrackets.html">Yonex Rackets</a>
        </div>
        <button class="dropdown-btn">Tennis Balls
            <i class="fa fa-caret-down fa-xs"></i>
        </button>
        <div class="dropdown-container">
            <a href="wilsonballs.html">Wilson Balls</a>
            <a href="headballs.html">Head Balls</a>
            <a href="babolatballs.html">Babolat Balls</a>
        </div>
        <button class="dropdown-btn">Bags
            <i class="fa fa-caret-down fa-xs"></i>
        </button>
        <div class="dropdown-container">
            <a href="3packbags.html">3 Pack Bags</a>
            <a href="6packbags.html">6 Pack Bags</a>
            <a href="9-15packbags.html">9 - 15 Pack Bags</a>
            <a href="backpacks.html">Backpacks</a>
        </div>
        <button class="dropdown-btn">Grips
            <i class="fa fa-caret-down fa-xs"></i>
        </button>
        <div class="dropdown-container">
            <a href="overgrips.html">Overgrips</a>
            <a href="replacementgrips.html">Replacement Grips</a>
        </div>
        <button class="dropdown-btn">Footwear
            <i class="fa fa-caret-down fa-xs"></i>
        </button>
        <div class="dropdown-container">
            <a href="menstennisshoes.html">Men's Tennis Shoes</a>
            <a href="womanstennisshoes.html">Woman's Tennis Shoes</a>
            <a href="juniorshoes.html">Junior Shoes</a>
        </div>
        <button class="dropdown-btn">Strings
            <i class="fa fa-caret-down fa-xs"></i>
        </button>
        <div class="dropdown-container">
            <a href="tennissinglesets.html">Tennis Single Sets</a>
            <a href="tennisreels.html">Tennis Reels</a>
        </div>
    </div>
</div>
</div>

<script>
    //Here is the JavaScript code//
    //WHen users click on "sandwich icon", open or show the curtain layer//
    //Write the openNav() method here //
    function openNav() {
        document.getElementById("myNav").style.display = "block";
    }
    
     //Close Nav curtain //
     function closeNav() {
        document.getElementById("myNav").style.display = "none";
     }

    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;

    for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
            } else {
                dropdownContent.style.display = "block";
            }
        });
    }

    // Wishlist logic
    let wishlist = JSON.parse(localStorage.getItem("wishlist")) || []; // Load wishlist from localStorage

function addToWishlist(productId) {
    const product = productData.find(item => item.id === productId); // Ensure this matches your productData structure
    if (product) {
        const existingProduct = wishlist.find(item => item.id === productId);
        if (!existingProduct) {
            wishlist.push(product); // Add to wishlist if not already present
            localStorage.setItem("wishlist", JSON.stringify(wishlist)); // Save updated wishlist to localStorage
            console.log("Product added to wishlist:", productId);
            alert("Product added to wishlist");
        } else {
            console.log("Product already in wishlist:", productId);
        }
    } else {
        console.error("Product not found:", productId);
    }
}
</script>

    <main>
        <div id="wishlist-container">
            <!-- Wishlist items will be dynamically added here -->
        </div>
        <!-- Checkout button (optional) -->
        <button class="checkout-button" onclick="window.location.href='checkout.html'">Checkout</button>
    </main>

    <footer>
        <p>2024 Tennis Hub All Rights Reserved</p>
    </footer>

    <script src="wishlist.js"></script> <!-- Include the wishlist.js file -->
    <script src="productData.js"></script> <!-- Include the productData.js file -->
    <script src="cart.js"></script>

    <script>
        // Open and close navigation menu
        function openNav() {
            document.getElementById("myNav").style.display = "block";
        }
        function closeNav() {
            document.getElementById("myNav").style.display = "none";
        }

        // Display wishlist items
       
        function displayWishlist() {
    const wishlistContainer = document.getElementById('wishlist-container');
    wishlistContainer.innerHTML = ''; // Clear previous content
    const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    
    wishlist.forEach(item => {
        const productElement = document.createElement('div');
        productElement.className = 'wishlist-item';
        productElement.innerHTML = `
            <img src="${item.image}" alt="${item.name}">
            <div class="wishlist-details">
                <h3>${item.name}</h3>
                <div class="wishlist-actions">
                    <p>Price: $${item.price}</p>
                    <button onclick="removeFromWishlist(${item.id})">Remove</button>
                    <button onclick="addToCart(${item.id})">Add to Cart</button>
                </div>
            </div>
        `;
        wishlistContainer.appendChild(productElement);
    });
}

function removeFromWishlist(productId) {
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    wishlist = wishlist.filter(item => item.id !== productId);
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
    displayWishlist();
}

displayWishlist(); // Call this function when the page loads



        // Cart animation when item added
        function animateCartCount() {
            const cartElement = document.querySelector('.cart');
            const cartCountElement = document.getElementById("cart-count");

            // Add the flash class to both the cart and the cart count
            cartElement.classList.add("cart-flash");
            cartCountElement.classList.add("cart-count-flash");
            cartCountElement.classList.add("animated");

            // Clear previous animations
            cartElement.addEventListener("animationend", () => {
                cartElement.classList.remove("cart-flash");
                cartCountElement.classList.remove("cart-count-flash");
                cartCountElement.classList.remove("animated");
            }, { once: true });
        }

        // Update cart count
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartCount = cart.length;
            document.getElementById("cart-count").innerText = cartCount;
        }

        // Add item to cart
    function addToCart(productId) {
    const wishlist = JSON.parse(localStorage.getItem('wishlist')) || []; // Load the wishlist here
    const product = wishlist.find(item => item.id === productId);
    
    if (!product) {
        alert("Product not found in wishlist"); // Optional: alert if product not found
        return;
    }

    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const existingItem = cart.find(item => item.id === productId);

    if (existingItem) {
        existingItem.quantity++;
    } else {
        cart.push({ ...product, quantity: 1 });
    }

    localStorage.setItem('cart', JSON.stringify(cart));
    animateCartCount();
    updateCartCount();

    // Show alert after a delay
    setTimeout(() => {
        alert("Product added to cart"); // Alert after animation
    }, 500); // Match this duration with the CSS animation duration
}


        updateCartCount(); // Update cart count on page load
    </script>
</body>
</html>
